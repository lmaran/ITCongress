angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(n){var i=n.storageKey(),t=n.storage();t?t.get(i)?n.use(t.get(i)):angular.isString(n.preferredLanguage())?n.use(n.preferredLanguage()):t.set(i,n.use()):angular.isString(n.preferredLanguage())&&n.use(n.preferredLanguage())}]);angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(n){var r={},u,s=[],a,t,v,i,h,o,y=n,b,f,rt,k=[],d=!1,e,g="translate-cloak",ut,p,w,ft=!1,nt=".",et=function(){var n=window.navigator;return(n.language||n.browserLanguage||n.systemLanguage||n.userLanguage||"").split("-").join("_")},ot=function(n){for(var t=[],f=angular.lowercase(n),r=0,e=s.length,u,i;r<e;r++)t.push(angular.lowercase(s[r]));return t.indexOf(f)>-1?f:a&&a[n]&&(u=a[n],t.indexOf(angular.lowercase(u))>-1)?u:(i=n.split("_"),i.length>1&&t.indexOf(angular.lowercase(i[0]))>1?i[0]:void 0)},c=function(n,t){if(!n&&!t)return r;if(n&&!t){if(angular.isString(n))return r[n]}else angular.isObject(r[n])||(r[n]={}),angular.extend(r[n],l(t));return this},l,tt,it;this.translations=c;this.cloakClassName=function(n){return n?(g=n,this):g};l=function(n,t,i,r){var u,e,o,f;t||(t=[]);i||(i={});for(u in n)n.hasOwnProperty(u)&&(f=n[u],angular.isObject(f)?l(f,t.concat(u),i,u):(e=t.length?""+t.join(nt)+nt+u:u,t.length&&u===r&&(o=""+t.join(nt),i[o]="@:"+e),i[e]=f));return i};this.addInterpolation=function(n){return k.push(n),this};this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")};this.useInterpolation=function(n){return rt=n,this};this.useSanitizeValueStrategy=function(n){return d=n,this};this.preferredLanguage=function(n){return n?(u=n,this):u};this.translationNotFoundIndicator=function(n){return this.translationNotFoundIndicatorLeft(n),this.translationNotFoundIndicatorRight(n),this};this.translationNotFoundIndicatorLeft=function(n){return n?(p=n,this):p};this.translationNotFoundIndicatorRight=function(n){return n?(w=n,this):w};this.fallbackLanguage=function(n){return tt(n),this};tt=function(n){return n?(angular.isString(n)?(v=!0,t=[n]):angular.isArray(n)&&(v=!1,t=n),angular.isString(u)&&t.push(u),this):v?t[0]:t};this.use=function(n){if(n){if(!r[n]&&!e)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+n+"'");return i=n,this}return i};it=function(n){if(!n)return b?b+y:y;y=n};this.storageKey=it;this.useUrlLoader=function(n){return this.useLoader("$translateUrlLoader",{url:n})};this.useStaticFilesLoader=function(n){return this.useLoader("$translateStaticFilesLoader",n)};this.useLoader=function(n,t){return e=n,ut=t||{},this};this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")};this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")};this.useStorage=function(n){return o=n,this};this.storagePrefix=function(n){return n?(b=n,this):n};this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")};this.useMissingTranslationHandler=function(n){return f=n,this};this.usePostCompiling=function(n){return ft=!!n,this};this.determinePreferredLanguage=function(n){var t=n&&angular.isFunction(n)?n():et();if(s.length)u=ot(t);else return u=t,this};this.registerAvailableLanguageKeys=function(n,t){return n?(s=n,t&&(a=t),this):s};this.$get=["$log","$injector","$rootScope","$q",function(n,s,a,b){var ot,ct=s.get(rt||"$translateDefaultInterpolation"),lt=!1,at={},et={},vt,st,nt=function(n,r,f){var e=b.defer(),s;return n=n.trim(),s=function(){var n=u?et[u]:et[i],r,f;return vt=0,o&&!n&&(r=ot.get(y),n=et[r],t&&t.length&&(f=bt(t,r),vt=f>-1?f+=1:0,t.push(u))),n}(),s?s.then(function(){gt(n,r,f).then(e.resolve,e.reject)},e.reject):gt(n,r,f).then(e.resolve,e.reject),e.promise},bt=function(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},wt=function(n){return p&&(n=[p,n].join(" ")),w&&(n=[n,w].join(" ")),n},pt=function(n){i=n;a.$emit("$translateChangeSuccess");o&&ot.set(nt.storageKey(),i);ct.setLocale(i);angular.forEach(at,function(n,t){at[t].setLocale(i)});a.$emit("$translateChangeEnd")},ht=function(n){if(!n)throw"No language key specified for loading.";var t=b.defer();return a.$emit("$translateLoadingStart"),lt=!0,s.get(e)(angular.extend(ut,{key:n})).then(function(i){var r={};a.$emit("$translateLoadingSuccess");angular.isArray(i)?angular.forEach(i,function(n){angular.extend(r,l(n))}):angular.extend(r,l(i));lt=!1;t.resolve({key:n,table:r});a.$emit("$translateLoadingEnd")},function(n){a.$emit("$translateLoadingError");t.reject(n);a.$emit("$translateLoadingEnd")}),t.promise},yt,ti;if(o&&(ot=s.get(o),!ot.get||!ot.set))throw new Error("Couldn't use storage '"+o+"', missing get() or set() method!");angular.isFunction(ct.useSanitizeValueStrategy)&&ct.useSanitizeValueStrategy(d);k.length&&angular.forEach(k,function(n){var t=s.get(n);t.setLocale(u||i);angular.isFunction(t.useSanitizeValueStrategy)&&t.useSanitizeValueStrategy(d);at[t.getInterpolationIdentifier()]=t});var ii=function(n){var t=b.defer();return r.hasOwnProperty(n)?(t.resolve(r[n]),t.promise):(et[n].then(function(n){c(n.key,n.table);t.resolve(n.table)},t.reject),t.promise)},ri=function(n,t,r,u){var f=b.defer();return ii(n).then(function(e){e.hasOwnProperty(t)?(u.setLocale(n),f.resolve(u.interpolate(e[t],r)),u.setLocale(i)):f.reject()},f.reject),f.promise},ui=function(n,t,u,f){var e,o=r[n];return o.hasOwnProperty(t)&&(f.setLocale(n),e=f.interpolate(o[t],u),f.setLocale(i)),e},kt=function(n,i,r,u){var f=b.defer(),e;return n<t.length?(e=t[n],ri(e,i,r,u).then(function(n){f.resolve(n)},function(){var t=kt(n+1,i,r,u);f.resolve(t)})):f.resolve(i),f.promise},dt=function(n,i,r,u){var f,e;return n<t.length&&(e=t[n],f=ui(e,i,r,u),f||(f=dt(n+1,i,r,u))),f},fi=function(n,t,i){return kt(st>0?st:vt,n,t,i)},ei=function(n,t,i){return dt(st>0?st:vt,n,t,i)},gt=function(n,u,e){var o=b.defer(),c=i?r[i]:r,l=e?at[e]:ct,h;return c&&c.hasOwnProperty(n)?(h=c[n],h.substr(0,2)==="@:"?nt(h.substr(2),u,e).then(o.resolve,o.reject):o.resolve(l.interpolate(h,u))):(f&&!lt&&s.get(f)(n,i),i&&t&&t.length?fi(n,u,l).then(function(n){o.resolve(n)},function(n){o.reject(wt(n))}):o.reject(wt(n))),o.promise},ni=function(n,u,e){var o,c=i?r[i]:r,l=e?at[e]:ct,h;return c&&c.hasOwnProperty(n)?(h=c[n],o=h.substr(0,2)==="@:"?ni(h.substr(2),u,e):l.interpolate(h,u)):(f&&!lt&&s.get(f)(n,i),i&&t&&t.length?(vt=0,o=ei(n,u,l)):o=wt(n)),o};if(nt.preferredLanguage=function(){return u},nt.cloakClassName=function(){return g},nt.fallbackLanguage=function(n){if(n!==undefined&&n!==null){if(tt(n),e&&t&&t.length)for(var i=0,r=t.length;i<r;i++)et[t[i]]||(et[t[i]]=ht(t[i]));nt.use(nt.use())}return v?t[0]:t},nt.useFallbackLanguage=function(n){if(n!==undefined&&n!==null)if(n){var i=bt(t,n);i>-1&&(st=i)}else st=0},nt.proposedLanguage=function(){return h},nt.storage=function(){return ot},nt.use=function(n){if(!n)return i;var t=b.defer();return a.$emit("$translateChangeStart"),!r[n]&&e?(h=n,et[n]=ht(n).then(function(i){c(i.key,i.table);t.resolve(i.key);h===n&&(pt(i.key),h=undefined)},function(n){h=undefined;a.$emit("$translateChangeError");t.reject(n);a.$emit("$translateChangeEnd")})):(t.resolve(n),pt(n)),t.promise},nt.storageKey=function(){return it()},nt.isPostCompilingEnabled=function(){return ft},nt.refresh=function(n){function s(){u.resolve();a.$emit("$translateRefreshEnd")}function h(){u.reject();a.$emit("$translateRefreshEnd")}var u,f,o,l;if(!e)throw new Error("Couldn't refresh translation table, no loader registered!");if(u=b.defer(),a.$emit("$translateRefreshStart"),n)r[n]?ht(n).then(function(t){c(t.key,t.table);n===i&&pt(i);s()},h):h();else{if(f=[],t&&t.length)for(o=0,l=t.length;o<l;o++)f.push(ht(t[o]));i&&f.push(ht(i));b.all(f).then(function(n){angular.forEach(n,function(n){r[n.key]&&delete r[n.key];c(n.key,n.table)});i&&pt(i);s()})}return u.promise},nt.instant=function(n,e,o){var c,h,l,v,a;if(typeof n=="undefined"||n==="")return n;for(n=n.trim(),h=[],u&&h.push(u),i&&h.push(i),t&&t.length&&(h=h.concat(t)),l=0,v=h.length;l<v;l++)if(a=h[l],r[a]&&r[a][n]&&(c=ni(n,e,o)),typeof c!="undefined")break;return c||(c=n,f&&!lt&&s.get(f)(n,i)),c},e&&(angular.equals(r,{})&&nt.use(nt.use()),t&&t.length))for(yt=0,ti=t.length;yt<ti;yt++)et[t[yt]]=ht(t[yt]);return nt}]}]);angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(n){var t={},u,f="default",i=null,r={escaped:function(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[t]=angular.element("<div><\/div>").text(n[t]).html());return i}},e=function(n){return angular.isFunction(r[i])?r[i](n):n};return t.setLocale=function(n){u=n},t.getInterpolationIdentifier=function(){return f},t.useSanitizeValueStrategy=function(n){return i=n,this},t.interpolate=function(t,r){return i&&(r=e(r)),n(t)(r)},t}]);angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY");angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(n,t,i,r,u,f){return{restrict:"AE",scope:!0,compile:function(t,e){var o=e.translateValues?e.translateValues:undefined,s=e.translateInterpolation?e.translateInterpolation:undefined,h=t[0].outerHTML.match(/translate-value-+/i);return function(t,c,l){var y,a;if(t.interpolateParams={},l.$observe("translate",function(n){t.translationId=angular.equals(n,"")||!angular.isDefined(n)?i(c.text().replace(/^\s+|\s+$/g,""))(t.$parent):n}),o&&l.$observe("translateValues",function(n){n&&t.$parent.$watch(function(){angular.extend(t.interpolateParams,u(n)(t.$parent))})}),h){y=function(n){l.$observe(n,function(i){t.interpolateParams[angular.lowercase(n.substr(14))]=i})};for(a in l)l.hasOwnProperty(a)&&a.substr(0,14)==="translateValue"&&a!=="translateValues"&&y(a)}var v=function(t,i){c.html(t);var f=n.isPostCompilingEnabled(),u=typeof e.translateCompile!="undefined",o=u&&e.translateCompile!=="false";(f&&!u||o)&&r(c.contents())(i)},p=function(){return o||h?function(){t.$watch("interpolateParams",function(i){t.translationId&&i&&n(t.translationId,i,s).then(function(n){v(n,t)},function(n){v(n,t)})},!0)}:function(){var i=t.$watch("translationId",function(r){t.translationId&&r&&n(r,{},s).then(function(n){v(n,t);i()},function(n){v(n,t);i()})},!0)}}(),w=f.$on("$translateChangeSuccess",p);p();t.$on("$destroy",w)}}}}]);angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(n,t){return{compile:function(i){n.$on("$translateLoadingSuccess",function(){i.removeClass(t.cloakClassName())});i.addClass(t.cloakClassName())}}}]);angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(n,t){return function(i,r,u){return angular.isObject(r)||(r=n(r)()),t.instant(i,r,u)}}]);angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",["$q","$http",function(n,t){return function(i){if(!i||!angular.isString(i.prefix)||!angular.isString(i.suffix))throw new Error("Couldn't load static files, no prefix or suffix specified!");var r=n.defer();return t({url:[i.prefix,i.key,i.suffix].join(""),method:"GET",params:""}).success(function(n){r.resolve(n)}).error(function(){r.reject(i.key)}),r.promise}}]);angular.module("pascalprecht.translate").factory("$translateCookieStorage",["$cookieStore",function(n){return{get:function(t){return n.get(t)},set:function(t,i){n.put(t,i)}}}]);angular.module("pascalprecht.translate").factory("$translateLocalStorage",["$window","$translateCookieStorage",function(n,t){var i={get:function(t){return n.localStorage.getItem(t)},set:function(t,i){n.localStorage.setItem(t,i)}};return"localStorage"in n&&n.localStorage!==null?i:t}]);var app=angular.module("itcongressApp",["ngRoute","pascalprecht.translate","ngCookies","ui.bootstrap","ngSanitize"]);app.config(["$routeProvider","$locationProvider","$translateProvider",function(n,t,i){n.when("/",{controller:"homeController",templateUrl:"App/views/home.html"}).when("/Admin",{controller:"homeController",templateUrl:"App/views/admin.html"}).when("/Account/Login",{controller:"loginController",templateUrl:"App/views/login.html",title:"Login"}).when("/Account/Register",{controller:"registerController",templateUrl:"App/views/register.html",title:"Register"}).when("/Admin/Users",{controller:"userController",templateUrl:"App/views/users.html",title:"Users"}).when("/Admin/WhiteList",{controller:"whiteListController",templateUrl:"App/views/whiteList.html",title:"WhiteList"}).when("/Admin/ResetPasswords",{controller:"resetPasswordsController",templateUrl:"App/views/resetPasswords.html",title:"WhiteList"}).when("/Speakers",{controller:"speakerController",templateUrl:"App/views/speakers.html",title:"Speakers"}).when("/Speakers/:speakerId",{controller:"speakerController",templateUrl:"App/views/speakers.html",title:"Speaker"}).otherwise({redirectTo:"/"});t.html5Mode(!0);i.preferredLanguage("en").fallbackLanguage("en").useLocalStorage().useStaticFilesLoader({prefix:"Content/translates/",suffix:".json"})}]);app.config(["$httpProvider",function(n){n.interceptors.push("authInterceptor")}]);app.controller("homeController",["$scope","$location","$rootScope","homeService",function(n,t,r,u){function o(){u.getSessions().then(function(t){t.forEach(function(t){n.sessions.push({sessionId:t.sessionId,brand:t.brand||"",title:t.title,day:s(t.sessionId),time:h(t.sessionId,t.duration),room:f(t.sessionId),roomName:c(t.sessionId),maxAttendees:l(t.sessionId),currentAttendees:t.currentAttendees||0,isRegistered:!1,speakers:t.speakers})})}).then(function(){r.userName&&u.getRegisteredSessions("itcongress2014",r.userName).then(function(t){n.sessions.forEach(function(n){a(n.sessionId,t)&&(n.isRegistered=!0)})})}).catch(function(n){alert(JSON.stringify(n,null,4))})}function s(n){tmpArray=n.split("-");switch(tmpArray[0]){case"day1":return"21 May";case"day2":return"22 May";default:return"DayError"}}function h(n,t){var i,r;return tmpArray=n.split("-"),i=tmpArray[1],r="TimeError",r=t>0?e(i,t):e(i,45),i+" - "+r}function c(n){switch(f(n)){case"":return"";case"room1":return"Presentation Room 1";case"room2":return"Presentation Room 2";case"room3":return"Workshop Focus Group 1";case"room4":return"Workshop Focus Group 2";default:return"RoomError"}}function f(n){return(tmpArray=n.split("-"),tmpArray.length<3)?"":tmpArray[2]}function l(n){if(tmpArray=n.split("-"),tmpArray.length<3)return-1;switch(tmpArray[2]){case"room1":return 230;case"room2":return 230;case"room3":return 80;case"room4":return 80;default:return-2}}function a(n,t){var r=!1;for(i=0;i<t.length&&!r;i++)t[i]===n&&(r=!0);return r}n.sessions=[];o();n.addCustomer=function(){n.customers.push({name:n.newCustomer.name,city:n.newCustomer.city})};n.gotoSpeaker=function(){};n.addToSchedule=function(i,f,e){if(eventId="itcongress2014",r.userName==null)t.path("/Account/Login");else{var o=!1;if(n.sessions.forEach(function(n){n.day!=f||n.time!=e||n.isRegistered!=!0||o||(alert("You are busy!"),o=!0)}),o)return;u.addToSchedule(eventId,i).then(function(){n.sessions.forEach(function(n){n.sessionId==i&&(n.isRegistered=!0)})})}};n.removeFromSchedule=function(i){eventId="itcongress2014";r.userName==null?t.path("/Account/Login"):u.removeFromSchedule(eventId,i).then(function(){n.sessions.forEach(function(n){n.sessionId==i&&(n.isRegistered=!1)})})};function e(n,t){function i(n){return(n<10?"0":"")+n}var r=n.split(":"),u=r[0]*60+ +r[1]+ +t;return i(u%1440/60|0)+":"+i(u%60)}}]);app.controller("navbarController",["$scope","$location","$translate","$rootScope","$window",function(n,t,i,r,u){r.currentToken=u.localStorage.token||null;r.userName=u.localStorage.userName||null;r.role=u.localStorage.role||null;r.status=u.localStorage.status||null;n.menu=[{title:"Home",link:"/"},{title:"Speakers",link:"/Speakers"}];n.logout=function(){delete u.localStorage.token;delete u.localStorage.userName;delete u.localStorage.role;delete u.localStorage.status;r.currentToken=null;r.userName=null;r.role=null;r.status=null;t.path("/Account/Login")};n.isActive=function(n){return n===t.path()};n.changeLanguage=function(n){i.use(n)}}]);app.controller("registerController",["$scope","$rootScope","$http","$window","$location","authService","whiteListService","dialogService",function(n,t,i,r,u,f,e,o){function s(n){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(n)}n.user={};n.message="";n.isApproved=!1;n.notApproved=!1;n.checkEmail=function(){s(n.user.email)?e.get("itcongress2014",n.user.email).then(function(t){t==0?(n.isApproved=!1,n.notApproved=!0):(n.isApproved=!0,n.notApproved=!1)}).catch(function(n){delete r.localStorage.token;t.currentToken=null;alert(JSON.stringify(n.data,null,4))}):alert("Enter a valid email!")};n.submit=function(i){n.submitted=!0;i.$valid&&f.register(n.user).then(function(i){var e={userName:n.user.email,password:n.user.password};f.login(e).then(function(n){r.localStorage.token=n.access_token;r.localStorage.userName=n.userName;r.localStorage.role=n.role;r.localStorage.status=n.status;t.currentToken=r.localStorage.token;t.userName=r.localStorage.userName;t.role=r.localStorage.role;t.status=r.localStorage.status;var i="";i=n.status.substr(0,8)=="Approved"?"Contul dvs este ACTIV. In orice moment puteti accesa si configura  agenda personala utilizand adrea de email si parola folosite la inregistrare.":"Contul dvs este INACTIV. Deoarece aceasta adresa de email nu exista in baza noastra de date va rugam sa asteptati ca inregistrarea sa fie activata de catre echipa IT Congress 2014. Un email de confirmare a activarii contului va fi trimis pe aceasta adresa in urmatoarele 24 de ore.";o.alert(i,"Inregistrare realizata cu succes").then(function(){u.path("/")})}).catch(function(n){delete r.localStorage.token;delete r.localStorage.userName;delete r.localStorage.role;delete r.localStorage.status;t.currentToken=null;t.userName=null;t.role=null;t.status=null;alert(JSON.stringify(n.data,null,4))});n.message=JSON.stringify(i,null,4)}).catch(function(n){var t="<ul>",i=n.data.modelState[""];for(var r in i)t+="<li>"+i[r]+"<br><\/li>";t+="<\/ul>";o.alert(t,n.data.message)})}}]);app.controller("loginController",["$scope","$rootScope","$http","$window","$location","authService","dialogService",function(n,t,i,r,u,f,e){n.user={};n.message="";n.submit=function(n){f.login(n).then(function(n){r.localStorage.token=n.access_token;r.localStorage.userName=n.userName;r.localStorage.role=n.role;r.localStorage.status=n.status;t.currentToken=r.localStorage.token;t.userName=r.localStorage.userName;t.role=r.localStorage.role;t.status=r.localStorage.status;u.path("/")}).catch(function(n){delete r.localStorage.token;delete r.localStorage.userName;delete r.localStorage.isAdmin;delete r.localStorage.status;t.currentToken=null;t.userName=null;t.role=null;t.status=null;e.alert(n.data.error_description,"Authentication Error")})}}]);app.controller("userController",["$scope","userService",function(n,t){function i(){t.getUsers().then(function(t){n.users=t})}n.users=[];n.changeStatus=function(i,r){for(var u in n.users)if(n.users[u].id==i)break;t.updateStatus(i,r).then(function(){n.users[u].status=r})};i()}]);app.controller("whiteListController",["$scope","whiteListService","dialogService",function(n,t,i){function r(){t.getWhiteList().then(function(t){n.whiteList=t})}n.whiteList=[];n.errors={};r();n.delete=function(r){eventId="itcongress2014";i.confirm("Click ok to delete "+r+", otherwise click cancel.","Delete Email").then(function(){for(var i in n.whiteList)if(n.whiteList[i]==r)break;t.delete(eventId,r).then(function(){n.whiteList.splice(i,1)}).catch(function(t){n.errors=JSON.stringify(t.data,null,4);alert(n.errors)})},function(){})};n.add=function(){eventId="itcongress2014";t.add(eventId,n.newEmail).then(function(){n.whiteList.push(n.newEmail)}).catch(function(t){n.errors=JSON.stringify(t.data,null,4);alert(n.errors)})}}]);app.controller("confirmController",["$scope","$modalInstance","data",function(n,t,i){n.data=i;n.ok=function(){t.close()};n.cancel=function(){t.dismiss()}}]);app.controller("alertController",["$scope","$modalInstance","data",function(n,t,i){n.data=i;n.ok=function(){t.close()};n.cancel=function(){t.dismiss()}}]);app.controller("speakerController",["$scope","$location","$rootScope","speakerService","$routeParams",function(n,t,i,r,u){function f(){r.getSpeakers("itcongress2014").then(function(t){n.speakers=t}).catch(function(n){alert(JSON.stringify(n,null,4))})}n.speakers=[];f();n.search=u.speakerId}]);app.controller("resetPasswordsController",["$scope","$rootScope","$http","$window","$location","userService","whiteListService","dialogService",function(n,t,i,r,u,f,e,o){n.user={};n.message="";n.submit=function(t){n.submitted=!0;t.$valid&&f.resetPassword(n.user).then(function(){o.alert("Password has been changed!","Done")}).catch(function(n){var t,i,r;if(n.status==404)o.alert("Email not found","Error");else{t="<ul>";i=n.data.modelState[""];for(r in i)t+="<li>"+i[r]+"<br><\/li>";t+="<\/ul>";o.alert(t,n.data.message)}})}}]);app.factory("homeService",["$http",function(n){var t={};return t.getEvents=function(){return n.get("/api/events")},t.getSessions=function(){return n.get("/api/itcongress2014/sessions").then(function(n){return n.data})},t.getRegisteredSessions=function(t){return n.get("/api/"+t+"/MySchedule").then(function(n){return n.data})},t.addToSchedule=function(t,i){var r={};return r.SessionId=i,n.post("/api/"+t+"/MySchedule",r).then(function(n){return n.data})},t.removeFromSchedule=function(t,i){var r={};return r.SessionId=i,n.put("/api/"+t+"/MySchedule",r).then(function(n){return n.data})},t}]);app.factory("authService",["$http",function(n){var t={},i=function(n){var t=[];for(var i in n)t.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));return t.join("&")};return t.login=function(t){t.grant_type="password";var r=i(t);return n.post("/token",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(n){return n.data})},t.register=function(t){return n.post("/api/account/register",t).then(function(n){return n.data})},t}]);app.factory("userService",["$http",function(n){var t={};return t.getUsers=function(){return n.get("/api/users").then(function(n){return n.data})},t.updateStatus=function(t,i){return n.put("/api/users/"+t+"/"+i)},t.resetPassword=function(t){return n.put("/api/account/resetPassword",t)},t}]);app.factory("whiteListService",["$http",function(n){var t={};return t.getWhiteList=function(){return n.get("/api/itcongress2014/whiteList").then(function(n){return n.data})},t.delete=function(t,i){return n.delete("/api/"+t+"/whiteList/"+encodeURIComponent(i)+"/")},t.add=function(t,i){return n.post("/api/"+t+"/whiteList/"+encodeURIComponent(i)+"/")},t.get=function(t,i){return n.get("/api/"+t+"/whiteList/"+encodeURIComponent(i)+"/").then(function(n){return n.data})},t}]);app.factory("dialogService",["$modal",function(n){function t(t,i){var r=n.open({templateUrl:"/app/views/confirm.html",backdrop:"static",keyboard:!1,resolve:{data:function(){return{title:i?i:"Confirm",message:t}}},controller:"confirmController"});return r.result}function i(t,i){var r=n.open({templateUrl:"/app/views/alert.html",backdrop:"static",keyboard:!1,resolve:{data:function(){return{title:i?i:"",message:t}}},controller:"alertController"});return r.result}return{confirm:t,alert:i}}]);app.factory("speakerService",["$http",function(n){var t={};return t.getSpeakers=function(t){return n.get("/api/"+t+"/speakers").then(function(n){return n.data})},t.getSpeaker=function(t,i){return n.get("/api/"+t+"/speakers/"+i).then(function(n){return n.data})},t}]);app.factory("authInterceptor",["$rootScope","$q","$window",function(n,t,i){return{request:function(n){return n.headers=n.headers||{},i.localStorage.token&&(n.headers.Authorization="Bearer "+i.localStorage.token),n},response:function(n){return(n.status===401||n.status===403)&&$location.path("/Account/Login"),n||t.when(n)}}}]);app.directive("match",function(){return{require:"ngModel",restrict:"A",scope:{match:"="},link:function(n,t,i,r){n.$watch(function(){return r.$pristine&&angular.isUndefined(r.$modelValue)||n.match===r.$modelValue},function(n){r.$setValidity("match",n)})}}});
/*
//# sourceMappingURL=scripts.min.js.map
*/